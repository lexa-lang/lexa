{"version":3,"sources":["../../../src/php/array/array_slice.js"],"names":["module","exports","array_slice","arr","offst","lgth","preserveKeys","isInt","require","key","Object","prototype","toString","call","lgt","newAssoc","undefined","assoc","start","it","arrlgth","noPkIdx","slice"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,SAASC,WAAT,CAAqBC,GAArB,EAA0BC,KAA1B,EAAiCC,IAAjC,EAAuCC,YAAvC,EAAqD;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,QAAQC,QAAQ,eAAR,CAAd;;AAEA;;;;;;AAMA,MAAIC,MAAM,EAAV;;AAEA,MAAIC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BV,GAA/B,MAAwC,gBAAxC,IAA6DG,gBAAgBF,UAAU,CAA3F,EAA+F;AAC7F;AACA,QAAIU,MAAM,CAAV;AACA,QAAMC,WAAW,EAAjB;AACA,SAAKN,GAAL,IAAYN,GAAZ,EAAiB;AACfW,aAAO,CAAP;AACAC,eAASN,GAAT,IAAgBN,IAAIM,GAAJ,CAAhB;AACD;AACDN,UAAMY,QAAN;;AAEAX,YAAQA,QAAQ,CAAR,GAAYU,MAAMV,KAAlB,GAA0BA,KAAlC;AACAC,WAAOA,SAASW,SAAT,GAAqBF,GAArB,GAA2BT,OAAO,CAAP,GAAWS,MAAMT,IAAN,GAAaD,KAAxB,GAAgCC,IAAlE;;AAEA,QAAMY,QAAQ,EAAd;AACA,QAAIC,QAAQ,KAAZ;AACA,QAAIC,KAAK,CAAC,CAAV;AACA,QAAIC,UAAU,CAAd;AACA,QAAIC,UAAU,CAAd;;AAEA,SAAKZ,GAAL,IAAYN,GAAZ,EAAiB;AACf,QAAEgB,EAAF;AACA,UAAIC,WAAWf,IAAf,EAAqB;AACnB;AACD;AACD,UAAIc,OAAOf,KAAX,EAAkB;AAChBc,gBAAQ,IAAR;AACD;AACD,UAAI,CAACA,KAAL,EAAY;AACV;AACD;AACD,QAAEE,OAAF;AACA,UAAIb,MAAME,GAAN,KAAc,CAACH,YAAnB,EAAiC;AAC/BW,cAAMI,SAAN,IAAmBlB,IAAIM,GAAJ,CAAnB;AACD,OAFD,MAEO;AACLQ,cAAMR,GAAN,IAAaN,IAAIM,GAAJ,CAAb;AACD;AACF;AACD;AACA;AACA,WAAOQ,KAAP;AACD;;AAED,MAAIZ,SAASW,SAAb,EAAwB;AACtB,WAAOb,IAAImB,KAAJ,CAAUlB,KAAV,CAAP;AACD,GAFD,MAEO,IAAIC,QAAQ,CAAZ,EAAe;AACpB,WAAOF,IAAImB,KAAJ,CAAUlB,KAAV,EAAiBA,QAAQC,IAAzB,CAAP;AACD,GAFM,MAEA;AACL,WAAOF,IAAImB,KAAJ,CAAUlB,KAAV,EAAiBC,IAAjB,CAAP;AACD;AACF,CAtED","file":"array_slice.js","sourcesContent":["module.exports = function array_slice(arr, offst, lgth, preserveKeys) {\n  //  discuss at: https://locutus.io/php/array_slice/\n  // original by: Brett Zamir (https://brett-zamir.me)\n  //    input by: Brett Zamir (https://brett-zamir.me)\n  // bugfixed by: Kevin van Zonneveld (https://kvz.io)\n  //      note 1: Relies on is_int because !isNaN accepts floats\n  //   example 1: array_slice([\"a\", \"b\", \"c\", \"d\", \"e\"], 2, -1)\n  //   returns 1: [ 'c', 'd' ]\n  //   example 2: array_slice([\"a\", \"b\", \"c\", \"d\", \"e\"], 2, -1, true)\n  //   returns 2: {2: 'c', 3: 'd'}\n\n  const isInt = require('../var/is_int')\n\n  /*\n    if ('callee' in arr && 'length' in arr) {\n      arr = Array.prototype.slice.call(arr);\n    }\n  */\n\n  let key = ''\n\n  if (Object.prototype.toString.call(arr) !== '[object Array]' || (preserveKeys && offst !== 0)) {\n    // Assoc. array as input or if required as output\n    let lgt = 0\n    const newAssoc = {}\n    for (key in arr) {\n      lgt += 1\n      newAssoc[key] = arr[key]\n    }\n    arr = newAssoc\n\n    offst = offst < 0 ? lgt + offst : offst\n    lgth = lgth === undefined ? lgt : lgth < 0 ? lgt + lgth - offst : lgth\n\n    const assoc = {}\n    let start = false\n    let it = -1\n    let arrlgth = 0\n    let noPkIdx = 0\n\n    for (key in arr) {\n      ++it\n      if (arrlgth >= lgth) {\n        break\n      }\n      if (it === offst) {\n        start = true\n      }\n      if (!start) {\n        continue\n      }\n      ++arrlgth\n      if (isInt(key) && !preserveKeys) {\n        assoc[noPkIdx++] = arr[key]\n      } else {\n        assoc[key] = arr[key]\n      }\n    }\n    // Make as array-like object (though length will not be dynamic)\n    // assoc.length = arrlgth;\n    return assoc\n  }\n\n  if (lgth === undefined) {\n    return arr.slice(offst)\n  } else if (lgth >= 0) {\n    return arr.slice(offst, offst + lgth)\n  } else {\n    return arr.slice(offst, lgth)\n  }\n}\n"]}