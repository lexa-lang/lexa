{"version":3,"sources":["../../../src/php/exec/escapeshellarg.js"],"names":["module","exports","escapeshellarg","arg","indexOf","Error","isWindows","process","platform","window","navigator","replace"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,SAASC,cAAT,CAAwBC,GAAxB,EAA6B;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAIA,IAAIC,OAAJ,CAAY,MAAZ,MAAwB,CAAC,CAA7B,EAAgC;AAC9B,UAAM,IAAIC,KAAJ,CAAU,sEAAV,CAAN;AACD;;AAED;AACA,MAAIC,YAAY,KAAhB;AACA,MAAI,OAAOC,OAAP,KAAmB,WAAnB,IAAkCA,QAAQC,QAA9C,EAAwD;AACtDF,gBAAYC,QAAQC,QAAR,KAAqB,OAAjC;AACD;AACD,MAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiCA,OAAOC,SAAP,CAAiBF,QAAtD,EAAgE;AAC9DF,gBAAYG,OAAOC,SAAP,CAAiBF,QAAjB,CAA0BJ,OAA1B,CAAkC,KAAlC,MAA6C,CAAC,CAA1D;AACD;;AAED,MAAIE,SAAJ,EAAe;AACb;AACA;AACA,WAAO,MAAMH,IAAIQ,OAAJ,CAAY,SAAZ,EAAuB,KAAvB,CAAN,GAAsC,GAA7C;AACD,GAJD,MAIO;AACL;AACA,WAAO,MAAMR,IAAIQ,OAAJ,CAAY,IAAZ,EAAkB,OAAlB,CAAN,GAAmC,GAA1C;AACD;AACF,CAlCD","file":"escapeshellarg.js","sourcesContent":["module.exports = function escapeshellarg(arg) {\n  //  discuss at: https://locutus.io/php/escapeshellarg/\n  // Warning: this function emulates escapeshellarg() for php-running-on-linux\n  // the function behaves differently when running on Windows, which is not covered by this code.\n  //\n  // original by: Felix Geisendoerfer (https://www.debuggable.com/felix)\n  // improved by: Brett Zamir (https://brett-zamir.me)\n  // bugfixed by: divinity76 (https://github.com/divinity76)\n  //   example 1: escapeshellarg(\"kevin's birthday\")\n  //   returns 1: \"'kevin'\\\\''s birthday'\"\n  //   example 2: escapeshellarg(\"/home'; whoami;''\")\n  //   returns 2: \"'/home'\\\\''; whoami;'\\\\'''\\\\'''\"\n\n  if (arg.indexOf('\\x00') !== -1) {\n    throw new Error('escapeshellarg(): Argument #1 ($arg) must not contain any null bytes')\n  }\n\n  // Check if the script is running on Windows\n  let isWindows = false\n  if (typeof process !== 'undefined' && process.platform) {\n    isWindows = process.platform === 'win32'\n  }\n  if (typeof window !== 'undefined' && window.navigator.platform) {\n    isWindows = window.navigator.platform.indexOf('Win') !== -1\n  }\n\n  if (isWindows) {\n    // Windows escaping strategy\n    // Double quotes need to be escaped and the whole argument enclosed in double quotes\n    return '\"' + arg.replace(/([\"%])/g, '^$1') + '\"'\n  } else {\n    // Unix-like escaping strategy\n    return \"'\" + arg.replace(/'/g, \"'\\\\''\") + \"'\"\n  }\n}\n"]}