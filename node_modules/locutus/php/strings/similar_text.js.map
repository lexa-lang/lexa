{"version":3,"sources":["../../../src/php/strings/similar_text.js"],"names":["module","exports","similar_text","first","second","percent","pos1","pos2","max","firstLength","length","secondLength","p","q","l","sum","charAt","substr"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,KAAtB,EAA6BC,MAA7B,EAAqCC,OAArC,EAA8C;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAIF,UAAU,IAAV,IAAkBC,WAAW,IAA7B,IAAqC,OAAOD,KAAP,KAAiB,WAAtD,IAAqE,OAAOC,MAAP,KAAkB,WAA3F,EAAwG;AACtG,WAAO,CAAP;AACD;;AAEDD,WAAS,EAAT;AACAC,YAAU,EAAV;;AAEA,MAAIE,OAAO,CAAX;AACA,MAAIC,OAAO,CAAX;AACA,MAAIC,MAAM,CAAV;AACA,MAAMC,cAAcN,MAAMO,MAA1B;AACA,MAAMC,eAAeP,OAAOM,MAA5B;AACA,MAAIE,UAAJ;AACA,MAAIC,UAAJ;AACA,MAAIC,UAAJ;AACA,MAAIC,YAAJ;;AAEA,OAAKH,IAAI,CAAT,EAAYA,IAAIH,WAAhB,EAA6BG,GAA7B,EAAkC;AAChC,SAAKC,IAAI,CAAT,EAAYA,IAAIF,YAAhB,EAA8BE,GAA9B,EAAmC;AACjC,WAAKC,IAAI,CAAT,EAAYF,IAAIE,CAAJ,GAAQL,WAAR,IAAuBI,IAAIC,CAAJ,GAAQH,YAA/B,IAA+CR,MAAMa,MAAN,CAAaJ,IAAIE,CAAjB,MAAwBV,OAAOY,MAAP,CAAcH,IAAIC,CAAlB,CAAnF,EAAyGA,GAAzG,EAA8G;AAC5G;AACD;AACD,UAAIA,IAAIN,GAAR,EAAa;AACXA,cAAMM,CAAN;AACAR,eAAOM,CAAP;AACAL,eAAOM,CAAP;AACD;AACF;AACF;;AAEDE,QAAMP,GAAN;;AAEA,MAAIO,GAAJ,EAAS;AACP,QAAIT,QAAQC,IAAZ,EAAkB;AAChBQ,aAAOb,aAAaC,MAAMc,MAAN,CAAa,CAAb,EAAgBX,IAAhB,CAAb,EAAoCF,OAAOa,MAAP,CAAc,CAAd,EAAiBV,IAAjB,CAApC,CAAP;AACD;;AAED,QAAID,OAAOE,GAAP,GAAaC,WAAb,IAA4BF,OAAOC,GAAP,GAAaG,YAA7C,EAA2D;AACzDI,aAAOb,aACLC,MAAMc,MAAN,CAAaX,OAAOE,GAApB,EAAyBC,cAAcH,IAAd,GAAqBE,GAA9C,CADK,EAELJ,OAAOa,MAAP,CAAcV,OAAOC,GAArB,EAA0BG,eAAeJ,IAAf,GAAsBC,GAAhD,CAFK,CAAP;AAID;AACF;;AAED,MAAI,CAACH,OAAL,EAAc;AACZ,WAAOU,GAAP;AACD;;AAED,SAAQA,MAAM,GAAP,IAAeN,cAAcE,YAA7B,CAAP;AACD,CA7DD","file":"similar_text.js","sourcesContent":["module.exports = function similar_text(first, second, percent) {\n  //  discuss at: https://locutus.io/php/similar_text/\n  // original by: Rafa≈Ç Kukawski (https://blog.kukawski.pl)\n  // bugfixed by: Chris McMacken\n  // bugfixed by: Jarkko Rantavuori original by findings in stackoverflow (https://stackoverflow.com/questions/14136349/how-does-similar-text-work)\n  // improved by: Markus Padourek (taken from https://www.kevinhq.com/2012/06/php-similartext-function-in-javascript_16.html)\n  //   example 1: similar_text('Hello World!', 'Hello locutus!')\n  //   returns 1: 8\n  //   example 2: similar_text('Hello World!', null)\n  //   returns 2: 0\n\n  if (first === null || second === null || typeof first === 'undefined' || typeof second === 'undefined') {\n    return 0\n  }\n\n  first += ''\n  second += ''\n\n  let pos1 = 0\n  let pos2 = 0\n  let max = 0\n  const firstLength = first.length\n  const secondLength = second.length\n  let p\n  let q\n  let l\n  let sum\n\n  for (p = 0; p < firstLength; p++) {\n    for (q = 0; q < secondLength; q++) {\n      for (l = 0; p + l < firstLength && q + l < secondLength && first.charAt(p + l) === second.charAt(q + l); l++) {\n        // @todo: ^-- break up this crazy for loop and put the logic in its body\n      }\n      if (l > max) {\n        max = l\n        pos1 = p\n        pos2 = q\n      }\n    }\n  }\n\n  sum = max\n\n  if (sum) {\n    if (pos1 && pos2) {\n      sum += similar_text(first.substr(0, pos1), second.substr(0, pos2))\n    }\n\n    if (pos1 + max < firstLength && pos2 + max < secondLength) {\n      sum += similar_text(\n        first.substr(pos1 + max, firstLength - pos1 - max),\n        second.substr(pos2 + max, secondLength - pos2 - max),\n      )\n    }\n  }\n\n  if (!percent) {\n    return sum\n  }\n\n  return (sum * 200) / (firstLength + secondLength)\n}\n"]}