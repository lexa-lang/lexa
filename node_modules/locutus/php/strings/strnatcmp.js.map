{"version":3,"sources":["../../../src/php/strings/strnatcmp.js"],"names":["module","exports","strnatcmp","a","b","_phpCastString","require","leadingZeros","whitespace","digit","arguments","length","i","j","replace","test","charAt","ac","bc","aIsDigit","bIsDigit","bias","fractional","iBeforeStrEnd","jBeforeStrEnd"],"mappings":"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","file":"strnatcmp.js","sourcesContent":["module.exports = function strnatcmp(a, b) {\n  //       discuss at: https://locutus.io/php/strnatcmp/\n  //      original by: Martijn Wieringa\n  //      improved by: Michael White (https://getsprink.com)\n  //      improved by: Jack\n  //      bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n  // reimplemented by: Rafa≈Ç Kukawski\n  //        example 1: strnatcmp('abc', 'abc')\n  //        returns 1: 0\n  //        example 2: strnatcmp('a', 'b')\n  //        returns 2: -1\n  //        example 3: strnatcmp('10', '1')\n  //        returns 3: 1\n  //        example 4: strnatcmp('0000abc', '0abc')\n  //        returns 4: 0\n  //        example 5: strnatcmp('1239', '12345')\n  //        returns 5: -1\n  //        example 6: strnatcmp('t01239', 't012345')\n  //        returns 6: 1\n  //        example 7: strnatcmp('0A', '5N')\n  //        returns 7: -1\n\n  const _phpCastString = require('../_helpers/_phpCastString')\n\n  const leadingZeros = /^0+(?=\\d)/\n  const whitespace = /^\\s/\n  const digit = /^\\d/\n\n  if (arguments.length !== 2) {\n    return null\n  }\n\n  a = _phpCastString(a)\n  b = _phpCastString(b)\n\n  if (!a.length || !b.length) {\n    return a.length - b.length\n  }\n\n  let i = 0\n  let j = 0\n\n  a = a.replace(leadingZeros, '')\n  b = b.replace(leadingZeros, '')\n\n  while (i < a.length && j < b.length) {\n    // skip consecutive whitespace\n    while (whitespace.test(a.charAt(i))) i++\n    while (whitespace.test(b.charAt(j))) j++\n\n    let ac = a.charAt(i)\n    let bc = b.charAt(j)\n    let aIsDigit = digit.test(ac)\n    let bIsDigit = digit.test(bc)\n\n    if (aIsDigit && bIsDigit) {\n      let bias = 0\n      const fractional = ac === '0' || bc === '0'\n\n      do {\n        if (!aIsDigit) {\n          return -1\n        } else if (!bIsDigit) {\n          return 1\n        } else if (ac < bc) {\n          if (!bias) {\n            bias = -1\n          }\n\n          if (fractional) {\n            return -1\n          }\n        } else if (ac > bc) {\n          if (!bias) {\n            bias = 1\n          }\n\n          if (fractional) {\n            return 1\n          }\n        }\n\n        ac = a.charAt(++i)\n        bc = b.charAt(++j)\n\n        aIsDigit = digit.test(ac)\n        bIsDigit = digit.test(bc)\n      } while (aIsDigit || bIsDigit)\n\n      if (!fractional && bias) {\n        return bias\n      }\n\n      continue\n    }\n\n    if (!ac || !bc) {\n      continue\n    } else if (ac < bc) {\n      return -1\n    } else if (ac > bc) {\n      return 1\n    }\n\n    i++\n    j++\n  }\n\n  const iBeforeStrEnd = i < a.length\n  const jBeforeStrEnd = j < b.length\n\n  // Check which string ended first\n  // return -1 if a, 1 if b, 0 otherwise\n  return (iBeforeStrEnd > jBeforeStrEnd) - (iBeforeStrEnd < jBeforeStrEnd)\n}\n"]}