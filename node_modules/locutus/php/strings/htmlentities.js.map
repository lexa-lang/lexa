{"version":3,"sources":["../../../src/php/strings/htmlentities.js"],"names":["module","exports","htmlentities","string","quoteStyle","charset","doubleEncode","getHtmlTranslationTable","require","hashMap","regex","RegExp","Object","keys","join","replace","ent","length","substr"],"mappings":";;AAAAA,OAAOC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,UAA9B,EAA0CC,OAA1C,EAAmDC,YAAnD,EAAiE;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,0BAA0BC,QAAQ,uCAAR,CAAhC;AACA,MAAMC,UAAUF,wBAAwB,eAAxB,EAAyCH,UAAzC,CAAhB;;AAEAD,WAASA,WAAW,IAAX,GAAkB,EAAlB,GAAuBA,SAAS,EAAzC;;AAEA,MAAI,CAACM,OAAL,EAAc;AACZ,WAAO,KAAP;AACD;;AAED,MAAIL,cAAcA,eAAe,YAAjC,EAA+C;AAC7CK,YAAQ,GAAR,IAAe,QAAf;AACD;;AAEDH,iBAAeA,iBAAiB,IAAjB,IAAyB,CAAC,CAACA,YAA1C;;AAEA,MAAMI,QAAQ,IAAIC,MAAJ,CACZ,gDACEC,OAAOC,IAAP,CAAYJ,OAAZ,EACGK,IADH,CACQ,EADR;AAEE;AAFF,GAGGC,OAHH,CAGW,0BAHX,EAGuC,MAHvC,CADF,GAKE,GANU,EAOZ,GAPY,CAAd;;AAUA,SAAOZ,OAAOY,OAAP,CAAeL,KAAf,EAAsB,UAAUM,GAAV,EAAe;AAC1C,QAAIA,IAAIC,MAAJ,GAAa,CAAjB,EAAoB;AAClB,aAAOX,eAAeG,QAAQ,GAAR,IAAeO,IAAIE,MAAJ,CAAW,CAAX,CAA9B,GAA8CF,GAArD;AACD;;AAED,WAAOP,QAAQO,GAAR,CAAP;AACD,GANM,CAAP;AAOD,CAlDD","file":"htmlentities.js","sourcesContent":["module.exports = function htmlentities(string, quoteStyle, charset, doubleEncode) {\n  //  discuss at: https://locutus.io/php/htmlentities/\n  // original by: Kevin van Zonneveld (https://kvz.io)\n  //  revised by: Kevin van Zonneveld (https://kvz.io)\n  //  revised by: Kevin van Zonneveld (https://kvz.io)\n  // improved by: nobbler\n  // improved by: Jack\n  // improved by: RafaÅ‚ Kukawski (https://blog.kukawski.pl)\n  // improved by: Dj (https://locutus.io/php/htmlentities:425#comment_134018)\n  // bugfixed by: Onno Marsman (https://twitter.com/onnomarsman)\n  // bugfixed by: Brett Zamir (https://brett-zamir.me)\n  //    input by: Ratheous\n  //      note 1: function is compatible with PHP 5.2 and older\n  //   example 1: htmlentities('Kevin & van Zonneveld')\n  //   returns 1: 'Kevin &amp; van Zonneveld'\n  //   example 2: htmlentities(\"foo'bar\",\"ENT_QUOTES\")\n  //   returns 2: 'foo&#039;bar'\n\n  const getHtmlTranslationTable = require('../strings/get_html_translation_table')\n  const hashMap = getHtmlTranslationTable('HTML_ENTITIES', quoteStyle)\n\n  string = string === null ? '' : string + ''\n\n  if (!hashMap) {\n    return false\n  }\n\n  if (quoteStyle && quoteStyle === 'ENT_QUOTES') {\n    hashMap[\"'\"] = '&#039;'\n  }\n\n  doubleEncode = doubleEncode === null || !!doubleEncode\n\n  const regex = new RegExp(\n    '&(?:#\\\\d+|#x[\\\\da-f]+|[a-zA-Z][\\\\da-z]*);|[' +\n      Object.keys(hashMap)\n        .join('')\n        // replace regexp special chars\n        .replace(/([()[\\]{}\\-.*+?^$|/\\\\])/g, '\\\\$1') +\n      ']',\n    'g',\n  )\n\n  return string.replace(regex, function (ent) {\n    if (ent.length > 1) {\n      return doubleEncode ? hashMap['&'] + ent.substr(1) : ent\n    }\n\n    return hashMap[ent]\n  })\n}\n"]}