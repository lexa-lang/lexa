{"version":3,"sources":["../../../src/php/strings/sha1.js"],"names":["module","exports","sha1","str","hash","crypto","require","sha1sum","createHash","update","digest","e","undefined","_rotLeft","n","s","t4","_cvtHex","val","i","v","toString","blockstart","j","W","Array","H0","H1","H2","H3","H4","A","B","C","D","E","temp","unescape","encodeURIComponent","strLen","length","wordArray","charCodeAt","push","toLowerCase"],"mappings":"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","file":"sha1.js","sourcesContent":["module.exports = function sha1(str) {\n  //  discuss at: https://locutus.io/php/sha1/\n  // original by: Webtoolkit.info (https://www.webtoolkit.info/)\n  // improved by: Michael White (https://getsprink.com)\n  // improved by: Kevin van Zonneveld (https://kvz.io)\n  //    input by: Brett Zamir (https://brett-zamir.me)\n  //      note 1: Keep in mind that in accordance with PHP, the whole string is buffered and then\n  //      note 1: hashed. If available, we'd recommend using Node's native crypto modules directly\n  //      note 1: in a steaming fashion for faster and more efficient hashing\n  //   example 1: sha1('Kevin van Zonneveld')\n  //   returns 1: '54916d2e62f65b3afa6e192e6a601cdbe5cb5897'\n\n  let hash\n  try {\n    const crypto = require('crypto')\n    const sha1sum = crypto.createHash('sha1')\n    sha1sum.update(str)\n    hash = sha1sum.digest('hex')\n  } catch (e) {\n    hash = undefined\n  }\n\n  if (hash !== undefined) {\n    return hash\n  }\n\n  const _rotLeft = function (n, s) {\n    const t4 = (n << s) | (n >>> (32 - s))\n    return t4\n  }\n\n  const _cvtHex = function (val) {\n    let str = ''\n    let i\n    let v\n\n    for (i = 7; i >= 0; i--) {\n      v = (val >>> (i * 4)) & 0x0f\n      str += v.toString(16)\n    }\n    return str\n  }\n\n  let blockstart\n  let i, j\n  const W = new Array(80)\n  let H0 = 0x67452301\n  let H1 = 0xefcdab89\n  let H2 = 0x98badcfe\n  let H3 = 0x10325476\n  let H4 = 0xc3d2e1f0\n  let A, B, C, D, E\n  let temp\n\n  // utf8_encode\n  str = unescape(encodeURIComponent(str))\n  const strLen = str.length\n\n  const wordArray = []\n  for (i = 0; i < strLen - 3; i += 4) {\n    j = (str.charCodeAt(i) << 24) | (str.charCodeAt(i + 1) << 16) | (str.charCodeAt(i + 2) << 8) | str.charCodeAt(i + 3)\n    wordArray.push(j)\n  }\n\n  switch (strLen % 4) {\n    case 0:\n      i = 0x080000000\n      break\n    case 1:\n      i = (str.charCodeAt(strLen - 1) << 24) | 0x0800000\n      break\n    case 2:\n      i = (str.charCodeAt(strLen - 2) << 24) | (str.charCodeAt(strLen - 1) << 16) | 0x08000\n      break\n    case 3:\n      i =\n        (str.charCodeAt(strLen - 3) << 24) |\n        (str.charCodeAt(strLen - 2) << 16) |\n        (str.charCodeAt(strLen - 1) << 8) |\n        0x80\n      break\n  }\n\n  wordArray.push(i)\n\n  while (wordArray.length % 16 !== 14) {\n    wordArray.push(0)\n  }\n\n  wordArray.push(strLen >>> 29)\n  wordArray.push((strLen << 3) & 0x0ffffffff)\n\n  for (blockstart = 0; blockstart < wordArray.length; blockstart += 16) {\n    for (i = 0; i < 16; i++) {\n      W[i] = wordArray[blockstart + i]\n    }\n    for (i = 16; i <= 79; i++) {\n      W[i] = _rotLeft(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1)\n    }\n\n    A = H0\n    B = H1\n    C = H2\n    D = H3\n    E = H4\n\n    for (i = 0; i <= 19; i++) {\n      temp = (_rotLeft(A, 5) + ((B & C) | (~B & D)) + E + W[i] + 0x5a827999) & 0x0ffffffff\n      E = D\n      D = C\n      C = _rotLeft(B, 30)\n      B = A\n      A = temp\n    }\n\n    for (i = 20; i <= 39; i++) {\n      temp = (_rotLeft(A, 5) + (B ^ C ^ D) + E + W[i] + 0x6ed9eba1) & 0x0ffffffff\n      E = D\n      D = C\n      C = _rotLeft(B, 30)\n      B = A\n      A = temp\n    }\n\n    for (i = 40; i <= 59; i++) {\n      temp = (_rotLeft(A, 5) + ((B & C) | (B & D) | (C & D)) + E + W[i] + 0x8f1bbcdc) & 0x0ffffffff\n      E = D\n      D = C\n      C = _rotLeft(B, 30)\n      B = A\n      A = temp\n    }\n\n    for (i = 60; i <= 79; i++) {\n      temp = (_rotLeft(A, 5) + (B ^ C ^ D) + E + W[i] + 0xca62c1d6) & 0x0ffffffff\n      E = D\n      D = C\n      C = _rotLeft(B, 30)\n      B = A\n      A = temp\n    }\n\n    H0 = (H0 + A) & 0x0ffffffff\n    H1 = (H1 + B) & 0x0ffffffff\n    H2 = (H2 + C) & 0x0ffffffff\n    H3 = (H3 + D) & 0x0ffffffff\n    H4 = (H4 + E) & 0x0ffffffff\n  }\n\n  temp = _cvtHex(H0) + _cvtHex(H1) + _cvtHex(H2) + _cvtHex(H3) + _cvtHex(H4)\n  return temp.toLowerCase()\n}\n"]}